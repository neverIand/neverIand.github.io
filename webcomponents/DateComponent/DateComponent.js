import{fetchData}from"/scripts/fetchData.js";import{handleThemeChange}from"/scripts/theme.js";class CustomDate extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.loadStyles(),document.addEventListener("berry-theme",(t=>handleThemeChange(t,this)))}connectedCallback(){this.render()}loadStyles(){const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href","/webcomponents/DateComponent/DateComponent.css"),this.shadowRoot.appendChild(t)}renderArticleDate(t){const e=this.shadowRoot.querySelector("time"),n=this.shadowRoot.getElementById("date");if(t&&t.date){if(e.setAttribute("datetime",t.date),n.textContent=t.date,t.lastUpdate){const n=document.createElement("span");n.textContent=`Last updated: ${t.lastUpdate}`,e.appendChild(n)}}else n.textContent="Unknown date"}render(){const t=this.getAttribute("datetime"),e=this.getAttribute("last-update"),n=document.createElement("template");n.innerHTML=`\n      <time datetime="${t}">\n        <span id="date">${t}</span>\n        ${e?`<span>Last updated: ${e}</span>`:""}\n      </time>\n  `,t||initArticleDate(this),this.shadowRoot.appendChild(n.content.cloneNode(!0))}}async function initArticleDate(t){const e=window.location.pathname.split("-");let n=e[0].endsWith("misc")?"/articles/misc/data/misc.json":"/articles/new/data/new.json";const a=await fetchData(n);if(a){const n=parseInt(e[1]),s=a.find((t=>t.id===n));t.renderArticleDate(s)}}customElements.get("berry-date")||customElements.define("berry-date",CustomDate);export default CustomDate;