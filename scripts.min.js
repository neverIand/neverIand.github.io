import"/webcomponents/DateComponent/DateComponent.js";import"/webcomponents/SubheadingComponent/SubheadingComponent.js";import"/webcomponents/CodeSnippetComponent/CodeSnippetComponent.js";import"/webcomponents/ToastComponent/ToastComponent.js";import{getTheme,setTheme}from"./theme.js";import"/webcomponents/LogoComponent.js";import"/webcomponents/HeaderComponent/HeaderComponent.js";import"/webcomponents/FooterComponent/FooterComponent.js";import"/webcomponents/DisclaimerComponent/DisclaimerComponent.js";import"/webcomponents/ImageComponent/ImageComponent.js";import"/webcomponents/ToolbarComponent/ToolbarComponent.js";document.addEventListener("DOMContentLoaded",(function(){document.querySelector("html").getAttribute("data-theme")||setTheme(getTheme())})),document.addEventListener("berry-theme",(function(e){setTheme(e.detail.theme)})),document.addEventListener("blockScroll",(function(e){e.detail.block?document.body.style.overflow="hidden":document.body.style.overflow="auto"}));export async function fetchData(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error, status: ${t.status}`);return await t.json()}catch(e){return console.error(e),null}}import{fetchData}from"/scripts/fetchData.js";import{getTheme}from"/scripts/theme.js";import"/webcomponents/ArticleComponent/ArticleComponent.js";function initHomePage(){console.info("Hello World"),initArticleList(),initArticleList("misc"),highlightBanner()}async function initArticleList(e){if("misc"===e){const e=await fetchData("/articles/misc/data/misc.json");e&&renderArticleList("misc-list",e)}else{const e=await fetchData("/articles/new/data/new.json");e&&renderArticleList("article-list",e)}}function renderArticleList(e,t){const o=document.getElementById(e);o?t.sort(((e,t)=>compareDate(e.lastUpdate||e.date,t.lastUpdate||t.date))).forEach((e=>{const t=document.createElement("berry-article");t.setAttribute("data-title",e.title),t.setAttribute("data-url",e.filename),t.setAttribute("data-subheading",e.subheading),t.setAttribute("data-date",e.date),e.lastUpdate&&t.setAttribute("data-lastupdate",e.lastUpdate),t.setAttribute("data-theme",getTheme()),o.appendChild(t)})):console.error("Element not found:",e)}function compareDate(e,t){return new Date(t)-new Date(e)}function highlightBanner(){const e=document.getElementById("banner").querySelectorAll("berry-logo");let t=0;e.length>0&&setInterval((()=>{e.forEach((e=>{e.setAttribute("muted",!0)})),e[t].setAttribute("muted",!1),t++,t===e.length&&(t=0)}),1e3)}document.addEventListener("DOMContentLoaded",initHomePage);export function getTheme(){const e=localStorage.getItem("berry-theme");return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}export function setTheme(e){try{return localStorage.setItem("berry-theme",e),document.querySelector("html").setAttribute("data-theme",e),e}catch(e){console.error(e);const t=new CustomEvent("berry-toast",{detail:{type:"error",message:e}});document.dispatchEvent(t)}}export function getInverseTheme(){return"light"===getTheme()?"dark":"light"}export function dispatchThemeChangeEvent(){const e=setTheme(getInverseTheme());if(e){const t=new CustomEvent("berry-theme",{detail:{theme:e}});document.dispatchEvent(t)}}export function handleThemeChange(e,t){t.setAttribute("data-theme",e.detail.theme)}